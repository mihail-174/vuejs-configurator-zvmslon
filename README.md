# Шаблон для верстки с использованием gulp v4

![GitHub release](https://img.shields.io/github/package-json/v/mihail-174/gulp-new)

## Особенности
* именование классов по [БЭМ](https://ru.bem.info/)
* используется БЭМ-структура
* используются препроцессоры [Pug](https://pugjs.org/) и [SCSS](https://sass-lang.com/)
* используется транспайлер [Babel](https://babeljs.io/) для поддержки современного JavaScript (ES6) в браузерах

## Установка
* установите [NodeJS](https://nodejs.org/en/) (если требуется) и [Yarn](https://yarnpkg.com/en/docs/install)
* скачайте сборку в консоли с помощью [Git](https://git-scm.com/downloads): ```git clone https://github.com/mihail-174/gulp-4.git```
* перейдите в скачанную папку со сборкой: ```cd gulp-4```
* запустите установку пакетов ```yarn install```
* чтобы начать работу, введите команду: ```yarn run dev``` (режим разработки)
* чтобы собрать проект, введите команду ```yarn run build``` (режим сборки)
* чтобы очистить папку dist, введите команду ```yarn clean```

Если вы всё сделали правильно, у вас должен открыться браузер с локальным сервером.
Режим сборки предполагает оптимизацию проекта: сжатие изображений, минифицирование CSS и JS-файлов для загрузки на сервер.

## Файловая структура

```
gulp-4
├── .bem                    — шаблоны создаваемых компонентов
├── dist                    — папка, из которой запускается локальный сервер для разработки (при запуске ```yarn run dev```)
├── src                     — используется во время разработки
│   ├── components          — компоненты (включает файлы scss, jade, js)
│   ├── fonts               — шрифты
│   ├── img                 — изображения
│   │   ├── favicon         — фавиконка
│   │   ├── icons           — png спрайты
│   │   ├── icons-svg       — svg спрайты
│   │   ├── webp            — для конвертации изрбражений в формат webp
│   |   └── ...             — другие изображения
│   ├── scripts             — скрипты
│   ├── styles              — базовые стили
│   ├── templates           — html шаблоны
│   |   ├── helpers         — миксины jade
│   |   ├── layout          — дефолтный html шаблон
│   |   ├── index.jade      — главная страница
│   |   └── ...             — другие страницы
│   └── vendors             — сторонние/внешние библиотеки
├── tasks                   — папка с Gulp-тасками
├── .babelrc.js             — настройки Babel
├── .bemrc.js               — настройки БЭМ
├── .browserslistrc
├── .eslintrc.json          — настройки ESLint
├── .gitignore              – запрет на отслеживание файлов Git'ом
├── .stylelintignore        – запрет на отслеживание файлов Stylelint'ом
├── .stylelintrc            — настройки Stylelint
├── gulpfile.babel.js       — настройки Gulp
├── package.json            — список зависимостей
└── .gitignore
```

## Команды
* ```yarn lint:style``` - проверить SCSS-файлы. Для VSCode необходимо установить [плагин](https://marketplace.visualstudio.com/items?itemName=shinnn.stylelint). Для WebStorm
или PHPStorm необходимо включить Stylelint в ```Languages & Frameworks - Style Sheets - Stylelint``` (ошибки будут исправлены автоматически при сохранении файла)
* ```yarn lint:style --fix``` - исправить ошибки в SCSS-файлах
* ```yarn dev``` - запуск сервера для разработки проекта
* ```yarn build``` - собрать проект с оптимизацией без запуска сервера
* ```yarn views``` - скомпилировать Pug-файлы
* ```yarn style``` - скомпилировать SCSS-файлы
* ```yarn script``` - собрать JS-файлы
* ```yarn image``` - собрать изображения
* ```yarn webp``` - сконвертировать изображения в формат ```.webp```
* ```yarn sprite```- собрать png спрайты
* ```yarn spritevg```- собрать svg спрайты
* ```yarn fonts``` - собрать шрифты
* ```yarn favicon``` - собрать фавиконки
* ```yarn zip``` - заархивировать собранный проект

## Рекомендации по использованию
### Компонентный подход к разработке сайтов
* каждый БЭМ-блок имеет свою папку внутри ```src/components```
* папка одного БЭМ-блока содержит в себе один Pug-файл, один SCSS-файл и один JS-файл (если у блока используется скрипт)
    * Pug-файл блока импортируется в файл ```src/templates/index.jade``` (или в необходимый файл страницы, откуда будет вызываться блок, или в другой БЭМ-блок)
    * SCSS-файл блока подключается в файле ```src/templates/index.jade``` (или в необходимый файл страницы)
    * JS-файл блока подключается в файле ```src/templates/index.jade``` (или в необходимый файл страницы)

Пример структуры папки с БЭМ-блоком:
```
components
├── header
│   ├── header.jade
│   ├── header.js
│   ├── header.scss
```
Чтобы вручную не создавать соответствующие папку и файлы, достаточно в консоли прописать следующие команды:
* ```bem create my-block``` - где ```my-block``` - имя БЭМ-блока (scss и jade)
* ```bem create my-block -T js``` - cоздаёт блок ```my-block``` только c технологией js (игнорируя технологии по умолчанию).
* ```bem create my-block -t js``` - cоздаёт блок ```my-block``` с технологиями по умолчанию + c технологией js.

### Перезаписывать существующие файлы
По умолчанию существующие файлы не перетираются и выдаётся сообщение о конфликтах. При этом работа команды не прерывается, недостающие файлы создаются. Для модификации этого поведения и принудительной перезаписи существующих файлов можно использовать опцию ```-f```
```bem create -f my-block```
В результате выполнения указанной команды существующие файлы будут перезаписаны без предупреждений.

### Страницы проекта
* страницы проекта находятся в папке ```src/templates```
    * каждая страница (в том числе главная) наследует шаблон ```src/templates/layouts/default.jade```
    * главная страница: ```src/templates/index.jade```

### Шрифты
* шрифты находятся в папке ```src/fonts```
* каждый шрифт должен быть представлен в 5 файлах `*.ttf`, `*.woff`, `*.woff2`, `*.eot`, `*.svg`

    В случае если предоставлен только один формат файла шрифта, остальные необходимо получить самостоятельно, используя конвертеры:

    * [ font-face generator ](https://everythingfonts.com/font-face)
    * [ font squirrel ](https://www.fontsquirrel.com/tools/webfont-generator)
    * [ onlinefontconverter ](https://onlinefontconverter.com/)

Пример структуры папки шрифта:
```
roboto
├── normal
│   ├── bold.eot
│   ├── bold.svg
│   ├── bold.ttf
│   ├── bold.woff
│   ├── bold.woff2
├── italic
│   ├── bold.eot
│   ├── bold.svg
│   ├── bold.ttf
│   ├── bold.woff
│   ├── bold.woff2
```

Пример содержимого файла `src/styles/_fonts.scss`
```
$EXAMPLE-path: '../fonts/';
$EXAMPLE-name: 'roboto';
$EXAMPLE-map: (
    100: '/thin',
    300: '/light',
    400: '/regular',
    500: '/medium',
    700: '/bold',
    900: '/black'
);
@include font-mixin(normal, $EXAMPLE-path,  $EXAMPLE-name, $EXAMPLE-map)
```

вместо `$EXAMPLE` пишем свое название переменной

в итоге путь самого шрифта должен быть такой: `../fonts/НАЗВАНИ_ШРИФТА/normal/НАЗВАНИЕ_ФАЙЛА_ШРИФТА`

после все этого создаем переменную `$font: Roboto, arial;` в файле `/src/components/helpers/_variables.scss`

### Изображения
изображения находятся в папке ```src/img```

изображение для генерации фавиконок должно находиться в папке ```src/img/favicon``` и иметь размер не менее ```16px x 16px```

### PNG спрайты
изображения находятся в папке ```src/img/icons```

для генерации спрайта воспользуйтесь командой ```yarn sprite```

### SVG спрайты
изображения находятся в папке ```src/img/icons-svg```

для генерации спрайта воспользуйтесь командой ```yarn sprite```
